<!DOCTYPE html><html lang="en"><head><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script><meta charset="UTF-8"><meta name="viewport" content="width=1280,initial-scale=1"><title>Go Kart Go! | Man Games</title><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet"><style>:root{--primary:#FFCE54;--accent:#48CFAD;--bg:#E0F7FA;--road:#656D78;--grass:#A0D468;--text:#2D3436;--danger:#ED5565}*{margin:0;padding:0;box-sizing:border-box;touch-action:none}body{font-family:Fredoka,sans-serif;background-color:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-image:radial-gradient(#ffce54 1px,transparent 1px);background-size:30px 30px;overflow:hidden}#gameWrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;position:relative}#gameWrapper:fullscreen{background:var(--bg);justify-content:flex-start;padding-top:20px;overflow-y:auto}.game-container{position:relative;background:#fff;padding:5px;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.1);border:5px solid #fff;outline:0}#gameWrapper:fullscreen .game-container{box-shadow:none;border:none;background:0 0;padding:0;margin-top:10px}canvas{background:var(--grass);border-radius:10px;display:block;box-shadow:inset 0 0 20px rgba(0,0,0,.2)}#gameWrapper:fullscreen canvas{height:60vh;width:auto;max-width:100%}.ui-panel{display:flex;justify-content:space-between;width:100%;max-width:500px;margin-bottom:.5rem;padding:0 5px;align-items:center;flex-wrap:wrap;gap:5px;position:relative;z-index:100}.score-box{background:#fff;padding:6px 12px;border-radius:15px;font-size:.9rem;font-weight:700;box-shadow:0 5px 15px rgba(0,0,0,.05);display:flex;align-items:center;gap:5px}.jump-bar-container{width:100px;height:10px;background:#eee;border-radius:5px;overflow:hidden;margin-left:5px}.jump-bar-fill{height:100%;background:var(--accent);width:0%;transition:width .1s}.btn{background:var(--primary);color:var(--text);border:none;padding:10px 25px;border-radius:50px;font-family:inherit;font-weight:700;font-size:1rem;cursor:pointer;box-shadow:0 4px 0 #f6bb42;transition:all .1s}.btn:focus{outline:3px solid var(--accent);transform:scale(1.05)}.btn:active{transform:translateY(4px);box-shadow:0 0 0 #f6bb42}.btn-secondary{background:#aab2bd;box-shadow:0 4px 0 #656d78;color:#fff}.btn-secondary:active{box-shadow:0 0 0 #656d78}.btn-home{background:var(--accent);box-shadow:0 4px 0 #37bc9b;margin-top:15px;text-decoration:none;display:inline-block;padding:8px 20px;border-radius:50px;color:#fff;font-weight:700;font-size:.9rem}.btn-home:focus{outline:3px solid var(--primary);transform:scale(1.05)}.btn-home:active{box-shadow:0 0 0 #37bc9b;transform:translateY(4px)}.btn-fullscreen{background:rgba(0,0,0,.1);color:var(--text);border:1px solid rgba(0,0,0,.1);padding:5px 10px;border-radius:10px;font-family:inherit;font-weight:700;font-size:.8rem;cursor:pointer}.btn-fullscreen:focus{outline:2px solid var(--accent)}#mobileControls{display:none;position:relative;margin-top:20px;width:200px;height:200px;z-index:100}#gameWrapper:fullscreen #mobileControls,body.mode-mobile #mobileControls{display:block}body.mode-tv #mobileControls{display:none!important}.dpad-btn{position:absolute;width:60px;height:60px;background:rgba(255,255,255,.8);border-radius:50%;border:2px solid #ccc;display:flex;justify-content:center;align-items:center;font-size:24px;user-select:none;cursor:pointer;box-shadow:0 4px 0 rgba(0,0,0,.1)}.dpad-btn:active{transform:translateY(2px);box-shadow:0 2px 0 rgba(0,0,0,.1);background:#fff}#btnUp{top:0;left:70px}#btnDown{bottom:0;left:70px}#btnLeft{top:70px;left:0}#btnRight{top:70px;right:0}#btnJump{top:70px;left:70px;background:var(--accent);color:#fff;border-color:#37bc9b;box-shadow:0 4px 0 #37bc9b}#btnJump:active{box-shadow:0 2px 0 #37bc9b}.overlay{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,.98);padding:2rem;border-radius:20px;text-align:center;box-shadow:0 20px 50px rgba(0,0,0,.2);min-width:320px;z-index:10}#startScreen{display:block}#gameOverModal{display:none}h1{color:var(--primary);font-size:2.5rem;margin-bottom:.5rem;text-shadow:2px 2px 0 #f6bb42}h2{color:var(--text);font-size:1.5rem;margin-bottom:1.5rem}.final-score{font-size:1.5rem;margin-bottom:1.5rem;color:var(--text)}.name-input{margin:10px 0;padding:10px;border-radius:10px;border:2px solid #ddd;font-family:inherit;font-size:1rem;width:80%;display:none}.button-group{display:flex;gap:10px;justify-content:center;margin-top:10px}.controls-hint{margin-top:1rem;color:#888;font-size:.9rem;text-align:center}body.mode-tv{cursor:none}</style></head><body><div id="gameWrapper"><div class="ui-panel"><div class="score-box">🏁 <span id="score">0</span>m</div><div class="score-box">❤️ <span id="health">3</span></div><div class="score-box">⚙️ <span id="gear">1</span></div><div class="score-box">⚙️ <span id="gear">1</span></div><div class="score-box" style="min-width:145px">⚡ <span id="speed" style="display:inline-block;width:40px;text-align:right">0</span> km/h</div><div class="score-box">🚀<div class="jump-bar-container"><div id="jumpBar" class="jump-bar-fill"></div></div></div><button class="btn-fullscreen" onclick="toggleFullScreen()">⛶</button></div><div class="game-container" id="gameContainer" tabindex="0"><canvas id="gameCanvas" width="400" height="600"></canvas><div id="startScreen" class="overlay"><h1>GO KART GO!</h1><h2>Start Your Engines!</h2><button class="btn" onclick="startGame()">RACE!</button><p class="controls-hint">⬅️➡️ Steer • ⬆️⬇️ Gears • SPACE Jump</p></div><div id="gameOverModal" class="overlay"><h1 id="gameOverTitle" style="color:#ed5565">GAME OVER</h1><p class="final-score">Distance: <span id="finalScore">0</span>m</p><input type="text" id="playerNameInput" class="name-input" placeholder="Enter your name" maxlength="10"><div class="button-group"><button class="btn" onclick="handleGameOverAction()">RACE AGAIN</button> <button class="btn btn-secondary" onclick="showStartScreen()">MENU</button></div></div></div><div id="mobileControls"><div id="btnUp" class="dpad-btn">⬆️</div><div id="btnLeft" class="dpad-btn">⬅️</div><div id="btnJump" class="dpad-btn">🚀</div><div id="btnRight" class="dpad-btn">➡️</div><div id="btnDown" class="dpad-btn">⬇️</div></div></div><a href="#" class="btn btn-home" onclick="goHome(event)">🏠 BACK TO HOME</a><script>const urlParams=new URLSearchParams(window.location.search),mode=urlParams.get("mode");function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}mode?document.body.classList.add("mode-"+mode):isTouchDevice()&&document.body.classList.add("mode-mobile");const SoundManager={ctx:new(window.AudioContext||window.webkitAudioContext),playTone(e,t,a,n=.1){"suspended"===this.ctx.state&&this.ctx.resume();const l=this.ctx.createOscillator(),o=this.ctx.createGain();l.type=t,l.frequency.setValueAtTime(e,this.ctx.currentTime),o.gain.setValueAtTime(n,this.ctx.currentTime),o.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+a),l.connect(o),o.connect(this.ctx.destination),l.start(),l.stop(this.ctx.currentTime+a)},playJump(){this.playTone(400,"sine",.1,.1),setTimeout(()=>this.playTone(600,"sine",.2,.1),50)},playCrash(){this.playTone(100,"sawtooth",.5,.3),setTimeout(()=>this.playTone(50,"sawtooth",.5,.3),100)},playCoin(){this.playTone(1200,"sine",.1,.1),setTimeout(()=>this.playTone(1800,"sine",.2,.1),50)},playShift(){this.playTone(200,"square",.1,.05)}},canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),scoreEl=document.getElementById("score"),speedEl=document.getElementById("speed"),gearEl=document.getElementById("gear"),healthEl=document.getElementById("health"),jumpBar=document.getElementById("jumpBar"),startScreen=document.getElementById("startScreen"),gameOverModal=document.getElementById("gameOverModal"),finalScoreEl=document.getElementById("finalScore"),nameInput=document.getElementById("playerNameInput"),gameOverTitle=document.getElementById("gameOverTitle"),gameContainer=document.getElementById("gameContainer");let score=0,highScore=0,isGameOver=!1,lastThousands=0,thousandsWithoutCoin=0;const roadWidth=320,roadX=(canvas.width-320)/2,laneCount=4,laneWidth=80;let roadOffset=0,speed=0,displaySpeed=0,gear=1;const maxGear=5,gearMaxSpeeds=[5,10,15,20,24],gearMinSpeeds=[0,4,9,14,19],player={x:canvas.width/2,y:canvas.height-120,width:40,height:70,color:"#FFCE54",lane:1,targetX:canvas.width/2,health:3,isJumping:!1,jumpHeight:0,jumpCharge:100,canJump:!0};let obstacles=[],coins=[],particles=[];const VehicleTypes=[{type:"car",color:"#ED5565",width:40,height:70,speed:10},{type:"truck",color:"#AAB2BD",width:50,height:100,speed:8},{type:"racer",color:"#967ADC",width:38,height:70,speed:18},{type:"bike",color:"#48CFAD",width:20,height:50,speed:12}];let keys={left:!1,right:!1,up:!1,down:!1,space:!1};function startGame(){startScreen.style.display="none",gameOverModal.style.display="none","suspended"===SoundManager.ctx.state&&SoundManager.ctx.resume(),resetGame(),gameContainer.focus(),requestAnimationFrame(update)}function resetGame(){score=0,speed=0,gear=1,player.lane=1,player.x=roadX+120,player.targetX=player.x,player.health=3,player.jumpCharge=100,player.isJumping=!1,player.jumpHeight=0,obstacles=[],coins=[],particles=[],isGameOver=!1,lastThousands=0,thousandsWithoutCoin=0,updateUI()}function showStartScreen(){gameOverModal.style.display="none",startScreen.style.display="block",isGameOver=!0,setTimeout(()=>{const e=startScreen.querySelector("button");e&&e.focus()},100)}function handleGameOverAction(){nameInput.style.display,startGame()}function update(){if(isGameOver)return;const e=gearMaxSpeeds[gear-1];let t=.1;speed<gearMinSpeeds[gear-1]&&(t=.02),speed<e?speed+=t:speed>e&&(speed-=.1),displaySpeed=Math.floor(speed/24*120),roadOffset+=speed,roadOffset>80&&(roadOffset=0),score+=.1*speed;const a=Math.floor(score/1e3);a>lastThousands&&(lastThousands=a,Math.random()<.3||thousandsWithoutCoin>=2?(spawnCoin(),thousandsWithoutCoin=0,console.log("Coin Spawned!")):(thousandsWithoutCoin++,console.log("No Coin. Pity:",thousandsWithoutCoin))),player.targetX=roadX+80*player.lane+40,player.x+=.2*(player.targetX-player.x),player.isJumping?(player.jumpHeight+=player.jumpVelocity,player.jumpVelocity-=1,player.jumpHeight<=0&&(player.jumpHeight=0,player.isJumping=!1)):player.jumpCharge<100&&(player.jumpCharge+=.5),Math.random()<.03&&spawnTraffic(),Math.random()<.03&&spawnTraffic(),updateObstacles(),updateCoins(),updateParticles(),updateUI(),draw(),requestAnimationFrame(update)}function spawnTraffic(){const e=Math.floor(4*Math.random());if(obstacles.some(t=>t.lane===e))return;const t=VehicleTypes[Math.floor(Math.random()*VehicleTypes.length)];let a=roadX+80*e+40,n=!1;e>=2&&(n=!0),obstacles.push({...t,x:a,y:-150,lane:e,isOncoming:n})}function spawnCoin(){const e=Math.floor(4*Math.random()),t=roadX+80*e+40;coins.push({x:t,y:-100,radius:10,color:"#FFD700"})}function updateObstacles(){for(let e=obstacles.length-1;e>=0;e--){let t=obstacles[e];t.isOncoming?t.y+=speed+.5*t.speed:t.y+=speed-.5*t.speed,(!player.isJumping||player.jumpHeight<20)&&Math.abs(t.x-player.x)<t.width/2+player.width/2-10&&Math.abs(t.y-player.y)<t.height/2+player.height/2-10?(handleCrash(),obstacles.splice(e,1)):(t.y>canvas.height+200||t.y<-300)&&obstacles.splice(e,1)}}function handleCrash(){SoundManager.playCrash(),createParticles(player.x,player.y,"#ED5565",15),player.health--,speed=0,gear=1,player.health<=0&&(isGameOver=!0,finalScoreEl.textContent=Math.floor(score),gameOverModal.style.display="block","undefined"!=typeof TimeManager&&TimeManager.syncTimeRemote(!0),setTimeout(()=>{const e=gameOverModal.querySelector("button");e&&e.focus()},100))}function updateCoins(){for(let e=coins.length-1;e>=0;e--){let t=coins[e];t.y+=speed,Math.abs(t.x-player.x)<30&&Math.abs(t.y-player.y)<50?(score+=50,SoundManager.playCoin(),"undefined"!=typeof GoldManager&&GoldManager.addCoins(1),createParticles(t.x,t.y,"#FFD700",5),coins.splice(e,1)):t.y>canvas.height&&coins.splice(e,1)}}function createParticles(e,t,a,n){for(let l=0;l<n;l++)particles.push({x:e,y:t,vx:10*(Math.random()-.5),vy:10*(Math.random()-.5),life:1,color:a})}function updateParticles(){for(let e=particles.length-1;e>=0;e--){let t=particles[e];t.x+=t.vx,t.y+=t.vy,t.life-=.05,t.life<=0&&particles.splice(e,1)}}function updateUI(){scoreEl.textContent=Math.floor(score),speedEl.textContent=displaySpeed,gearEl.textContent=gear,healthEl.textContent="❤️".repeat(player.health),jumpBar.style.width=player.jumpCharge+"%",speedEl.style.color=displaySpeed>100?"#ED5565":"#2D3436"}function draw(){ctx.fillStyle="#A0D468",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#656D78",ctx.fillRect(roadX,0,320,canvas.height),ctx.lineWidth=4,ctx.setLineDash([30,50]),ctx.lineDashOffset=-roadOffset,ctx.strokeStyle="rgba(255, 255, 255, 0.5)",ctx.beginPath(),ctx.moveTo(roadX+80,0),ctx.lineTo(roadX+80,canvas.height),ctx.stroke(),ctx.strokeStyle="#FFCE54",ctx.lineWidth=6,ctx.beginPath(),ctx.moveTo(roadX+160-4,0),ctx.lineTo(roadX+160-4,canvas.height),ctx.stroke(),ctx.beginPath(),ctx.moveTo(roadX+160+4,0),ctx.lineTo(roadX+160+4,canvas.height),ctx.stroke(),ctx.strokeStyle="rgba(255, 255, 255, 0.5)",ctx.lineWidth=4,ctx.beginPath(),ctx.moveTo(roadX+240,0),ctx.lineTo(roadX+240,canvas.height),ctx.stroke(),ctx.setLineDash([]),ctx.fillStyle="#FFF",ctx.fillRect(roadX-10,0,10,canvas.height),ctx.fillRect(roadX+320,0,10,canvas.height),ctx.fillStyle="#ED5565",coins.forEach(e=>{ctx.fillStyle=e.color,ctx.beginPath(),ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),ctx.fill(),ctx.strokeStyle="#F6BB42",ctx.lineWidth=2,ctx.stroke(),ctx.fillStyle="#B8860B",ctx.font="bold 12px sans-serif",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText("$",e.x,e.y+1)}),obstacles.forEach(e=>{ctx.fillStyle=e.color,ctx.fillRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height),ctx.fillStyle="rgba(0,0,0,0.2)",ctx.fillRect(e.x-e.width/2,e.y-e.height/2+5,e.width,10)}),ctx.save();const e=1+player.jumpHeight/100;ctx.translate(player.x,player.y-player.jumpHeight),ctx.scale(e,e),ctx.fillStyle=player.color,ctx.fillRect(-15,-25,30,50),ctx.fillStyle="#333",ctx.fillRect(-20,-20,5,12),ctx.fillRect(15,-20,5,12),ctx.fillRect(-20,10,5,12),ctx.fillRect(15,10,5,12),ctx.fillStyle="#E6E9ED",ctx.beginPath(),ctx.arc(0,0,10,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#D35400",ctx.fillRect(-18,20,36,5),ctx.restore(),particles.forEach(e=>{ctx.globalAlpha=e.life,ctx.fillStyle=e.color,ctx.beginPath(),ctx.arc(e.x,e.y,3,0,2*Math.PI),ctx.fill()}),ctx.globalAlpha=1}function shiftUp(){gear<5&&(gear++,SoundManager.playShift(),updateUI())}function shiftDown(){gear>1&&(gear--,SoundManager.playShift(),updateUI())}function moveLeft(){player.lane>0&&player.lane--}function moveRight(){player.lane<3&&player.lane++}function jump(){player.jumpCharge>=100&&!player.isJumping&&(player.isJumping=!0,player.jumpVelocity=15,player.jumpCharge=0,SoundManager.playJump())}window.addEventListener("keydown",e=>{const t=e.key,a=e.keyCode;let n=!1;if("Backspace"!==t&&"Escape"!==t&&8!==a&&27!==a&&461!==a&&10009!==a&&4!==a||(goHome(e),n=!0),(["ArrowLeft","a","A","4"].includes(t)||37===a||21===a)&&(moveLeft(),n=!0),(["ArrowRight","d","D","6"].includes(t)||39===a||22===a)&&(moveRight(),n=!0),(["ArrowUp","w","W","2"].includes(t)||38===a||19===a)&&(shiftUp(),n=!0),(["ArrowDown","s","S","8"].includes(t)||40===a||20===a)&&(shiftDown(),n=!0),[" ","Enter","5"].includes(t)||13===a||23===a){if("none"!==startScreen.style.display){const e="BUTTON"===document.activeElement.tagName?document.activeElement:null;e?e.click():startGame()}else if("none"!==gameOverModal.style.display){const e="BUTTON"===document.activeElement.tagName?document.activeElement:null;e?e.click():handleGameOverAction()}else jump();n=!0}"0"===t&&(toggleFullScreen(),n=!0),n&&(e.preventDefault(),e.stopPropagation())}),window.addEventListener("mousedown",e=>{"BUTTON"===e.target.tagName||e.target.classList.contains("dpad-btn")||jump()});const btnUp=document.getElementById("btnUp"),btnDown=document.getElementById("btnDown"),btnLeft=document.getElementById("btnLeft"),btnRight=document.getElementById("btnRight"),btnJump=document.getElementById("btnJump"),dpadButtons=[btnUp,btnDown,btnLeft,btnRight,btnJump];function toggleFullScreen(){const e=document.getElementById("gameWrapper");document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&e.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}async function goHome(e){e&&e.preventDefault(),"undefined"!=typeof TimeManager&&await TimeManager.syncTimeRemote(!0),window.location.href="index.html"}dpadButtons.forEach(e=>{if(!e)return;const t=t=>{t.preventDefault(),e===btnUp&&shiftUp(),e===btnDown&&shiftDown(),e===btnLeft&&moveLeft(),e===btnRight&&moveRight(),e===btnJump&&jump()};e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("mousedown",t)}),window.onload=()=>{if("none"!==startScreen.style.display){const e=startScreen.querySelector("button");e&&e.focus()}else gameContainer.focus()},gameContainer.addEventListener("blur",()=>{isGameOver||"none"!==startScreen.style.display||setTimeout(()=>gameContainer.focus(),50)}),showStartScreen()</script><script src="global.js"></script></body></html>