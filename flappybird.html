<!DOCTYPE html><html lang="en"><head><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script><meta charset="UTF-8"><meta name="viewport" content="width=1280,initial-scale=1"><title>Flappy Bird | Man Games</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet"><style>:root{--bg-color:#70c5ce;--text-color:#ffffff;--accent:#f1c40f}*{margin:0;padding:0;box-sizing:border-box;user-select:none}body{font-family:Nunito,sans-serif;background-color:#2c3e50;color:var(--text-color);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;overflow:hidden}h1{font-family:Fredoka,sans-serif;position:absolute;top:20px;font-size:3rem;color:#fff;text-shadow:2px 2px 0 #000;z-index:10}canvas{background-color:var(--bg-color);border:4px solid #fff;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.5);max-width:100%;max-height:80vh;outline:0}.score-display{position:absolute;top:100px;font-family:Fredoka,sans-serif;font-size:4rem;font-weight:700;text-shadow:2px 2px 0 #000;z-index:10;pointer-events:none}.controls-hint{margin-top:10px;font-size:1rem;opacity:.8}.back-btn{position:absolute;bottom:20px;color:#fff;text-decoration:none;font-weight:700;background:rgba(0,0,0,.5);padding:10px 20px;border-radius:20px;transition:all .2s}.back-btn:focus,.back-btn:hover{background:rgba(0,0,0,.8);transform:scale(1.05);outline:2px solid var(--accent)}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:100;display:flex;justify-content:center;align-items:center;backdrop-filter:blur(3px)}.modal{background:#fff;padding:40px;border-radius:30px;text-align:center;border:5px solid #e67e22;color:#2c3e50;animation:popIn .3s cubic-bezier(.175,.885,.32,1.275)}.modal h2{font-family:Fredoka,sans-serif;font-size:2.5rem;margin-bottom:10px}.modal p{font-size:1.5rem;margin-bottom:20px}button{padding:15px 30px;border-radius:15px;border:none;font-family:Fredoka,sans-serif;font-size:1.2rem;cursor:pointer;transition:transform .2s;background:#2ecc71;color:#fff;font-weight:700;box-shadow:0 5px 0 #27ae60}button:focus,button:hover{transform:translateY(-2px);box-shadow:0 7px 0 #27ae60;outline:3px solid var(--accent)}button:active{transform:translateY(2px);box-shadow:0 3px 0 #27ae60}@keyframes popIn{from{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}body.mode-tv{cursor:none}</style></head><body><h1>Flappy Bird</h1><div class="score-display" id="scoreDisplay">0</div><canvas id="gameCanvas" width="400" height="600" tabindex="0"></canvas><div class="controls-hint">Press 2, 5, Space, or Tap to Jump</div><div class="controls-hint">Press 2, 5, Space, or Tap to Jump</div><a href="#" class="back-btn" onclick="goHome(event)">🏠 Back to Home</a><div class="modal-overlay" id="startModal"><div class="modal"><h2>Ready?</h2><button onclick="startGame()">Start Game</button></div></div><div class="modal-overlay" id="gameOverModal" style="display:none"><div class="modal"><h2>Game Over</h2><p>Score: <span id="finalScore">0</span></p><button onclick="resetGame()">Play Again</button> <button onclick="goHome(event)" style="margin-top:10px;background-color:#e74c3c;display:block;width:100%">Back to Home</button></div></div><script>const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),scoreDisplay=document.getElementById("scoreDisplay"),startModal=document.getElementById("startModal"),gameOverModal=document.getElementById("gameOverModal"),finalScoreSpan=document.getElementById("finalScore"),GRAVITY=.25,JUMP=-5,PIPE_SPEED=2,PIPE_SPAWN_RATE=120,PIPE_GAP=130;let animationId,bird={x:50,y:300,width:30,height:30,velocity:0},pipes=[],coins=[],score=0,coinsCollectedInRun=0,pillarCount=0,frameCount=0,gameState="start";const SoundManager={ctx:null,init:function(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))},playTone:function(e,t,i,n=.1){this.ctx||this.init();const a=this.ctx.createOscillator(),o=this.ctx.createGain();a.type=t,a.frequency.setValueAtTime(e,this.ctx.currentTime),o.gain.setValueAtTime(n,this.ctx.currentTime),o.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+i),a.connect(o),o.connect(this.ctx.destination),a.start(),a.stop(this.ctx.currentTime+i)},jump:function(){this.playTone(400,"square",.1,.1)},score:function(){this.playTone(1e3,"sine",.1,.1)},crash:function(){this.playTone(100,"sawtooth",.3,.2),setTimeout(()=>this.playTone(80,"sawtooth",.3,.2),100)},coin:function(){this.playTone(1200,"sine",.1,.1)}};function startGame(){gameState="playing",startModal.style.display="none",gameOverModal.style.display="none",resetVars(),canvas.focus(),loop()}function resetGame(){startGame()}function resetVars(){bird={x:50,y:300,width:30,height:30,velocity:0},pipes=[],coins=[],score=0,coinsCollectedInRun=0,pillarCount=0,frameCount=0,scoreDisplay.textContent="0"}function jump(){"playing"===gameState&&(bird.velocity=-5,SoundManager.jump())}function update(){if(bird.velocity+=.25,bird.y+=bird.velocity,frameCount%120==0){const e=50,t=canvas.height-130-e,i=Math.floor(Math.random()*(t-e+1)+e);pillarCount++;let n=!1;if(pillarCount%10==0&&coinsCollectedInRun<3&&(n=!0),pipes.push({x:canvas.width,y:0,width:50,height:i,passed:!1}),n){const e=i+5,t=i+130-35,n=Math.floor(Math.random()*(t-e+1)+e);coins.push({x:canvas.width+10,y:n,width:30,height:30,collected:!1})}}for(let e=0;e<pipes.length;e++){let t=pipes[e];t.x-=2,bird.x<t.x+t.width&&bird.x+bird.width>t.x&&bird.y<t.height&&gameOver(),bird.x<t.x+t.width&&bird.x+bird.width>t.x&&bird.y+bird.height>t.height+130&&gameOver(),t.x+t.width<bird.x&&!t.passed&&(score++,scoreDisplay.textContent=score,t.passed=!0,SoundManager.score())}for(let e=0;e<coins.length;e++){let t=coins[e];t.x-=2,!t.collected&&bird.x<t.x+t.width&&bird.x+bird.width>t.x&&bird.y<t.y+t.height&&bird.y+bird.height>t.y&&(t.collected=!0,coinsCollectedInRun++,SoundManager.coin(),"undefined"!=typeof GoldManager&&GoldManager.addCoins(1))}pipes.length>0&&pipes[0].x<-50&&pipes.shift(),coins.length>0&&coins[0].x<-50&&coins.shift(),(bird.y+bird.height>canvas.height||bird.y<0)&&gameOver(),frameCount++}function draw(){ctx.fillStyle="#70c5ce",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#2ecc71",ctx.strokeStyle="#27ae60",ctx.lineWidth=3,pipes.forEach(e=>{ctx.fillRect(e.x,0,e.width,e.height),ctx.strokeRect(e.x,0,e.width,e.height);const t=e.height+130,i=canvas.height-t;ctx.fillRect(e.x,t,e.width,i),ctx.strokeRect(e.x,t,e.width,i)}),coins.forEach(e=>{e.collected||(ctx.fillStyle="#FFD700",ctx.beginPath(),ctx.arc(e.x+15,e.y+15,15,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#B8860B",ctx.font="bold 20px sans-serif",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText("$",e.x+15,e.y+15))}),ctx.fillStyle="#f1c40f",ctx.fillRect(bird.x,bird.y,bird.width,bird.height),ctx.fillStyle="white",ctx.fillRect(bird.x+20,bird.y+5,8,8),ctx.fillStyle="black",ctx.fillRect(bird.x+24,bird.y+7,2,2),ctx.fillStyle="#f39c12",ctx.fillRect(bird.x+5,bird.y+18,15,8),ctx.fillStyle="#ded895",ctx.fillRect(0,canvas.height-20,canvas.width,20),ctx.fillStyle="#73bf2e",ctx.fillRect(0,canvas.height-20,canvas.width,5)}function loop(){"playing"===gameState&&(update(),draw(),animationId=requestAnimationFrame(loop))}function gameOver(){gameState="gameover",SoundManager.crash(),cancelAnimationFrame(animationId),finalScoreSpan.textContent=score,gameOverModal.style.display="flex",setTimeout(()=>{const e=gameOverModal.querySelector("button");e&&e.focus()},100),"undefined"!=typeof TimeManager&&TimeManager.syncTimeRemote(!0)}function toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{console.log(`Error attempting to enable full-screen mode: ${e.message} (${e.name})`)})}async function goHome(e){e&&e.preventDefault(),"undefined"!=typeof TimeManager&&await TimeManager.syncTimeRemote(!0),window.location.href="index.html"}document.addEventListener("keydown",e=>{const t=e.key,i=e.keyCode;let n=!1;if("Backspace"!==t&&"Escape"!==t&&8!==i&&27!==i&&461!==i&&10009!==i&&4!==i||(window.location.href="index.html",n=!0),["2","5"," ","ArrowUp","Enter"].includes(t)||[13,23,38,19].includes(i))if("playing"===gameState)jump(),n=!0;else{const e=document.activeElement;e&&"BUTTON"===e.tagName?e.click():"start"===gameState?startGame():"gameover"===gameState&&resetGame(),n=!0}"0"!==t&&"f"!==t.toLowerCase()||(toggleFullScreen(),n=!0),n&&(e.preventDefault(),e.stopPropagation())}),canvas.addEventListener("mousedown",e=>{e.preventDefault(),"playing"===gameState&&jump()}),canvas.addEventListener("touchstart",e=>{e.preventDefault(),"playing"===gameState&&jump()},{passive:!1}),draw(),window.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search).get("mode");e&&document.body.classList.add(`mode-${e}`)}),window.onload=()=>{"none"!==startModal.style.display?startModal.querySelector("button").focus():canvas.focus()},canvas.addEventListener("blur",()=>{"playing"===gameState&&setTimeout(()=>canvas.focus(),50)})</script><script src="global.js?v=11"></script></body></html>