<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=1280,initial-scale=1"><title>Whack-a-Mole | Man Games</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet"><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script><style>:root{--bg-color:#8D6E63;--grass-color:#4CAF50;--hole-color:#3E2723;--accent:#FFD54F;--text-color:#fff}*{margin:0;padding:0;box-sizing:border-box;user-select:none}body{font-family:Nunito,sans-serif;background-color:var(--bg-color);color:var(--text-color);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;overflow:hidden;background-image:radial-gradient(#5d4037 15%,transparent 16%),radial-gradient(#5d4037 15%,transparent 16%);background-size:60px 60px;background-position:0 0,30px 30px}h1{font-family:Fredoka,sans-serif;font-size:3.5rem;margin-bottom:1rem;text-shadow:3px 3px 0 #3e2723;color:var(--accent)}.stats-bar{display:flex;gap:2rem;margin-bottom:2rem;font-size:1.5rem;font-family:Fredoka,sans-serif;background:rgba(0,0,0,.3);padding:10px 30px;border-radius:50px;border:2px solid rgba(255,255,255,.2)}.game-board{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;padding:20px;background:var(--grass-color);border-radius:20px;box-shadow:0 10px 0 #2e7d32;position:relative;outline:0}.hole{width:100px;height:100px;background:var(--hole-color);border-radius:50%;position:relative;overflow:hidden;box-shadow:inset 0 10px 20px rgba(0,0,0,.5);cursor:pointer;border:4px solid transparent;transition:border-color .2s}.hole-number{position:absolute;top:5px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,.5);font-family:Fredoka,sans-serif;font-size:1.2rem;font-weight:700;z-index:5;pointer-events:none}.hole.whacked-wrong{border-color:#ff5252;box-shadow:0 0 15px #ff5252,inset 0 10px 20px rgba(0,0,0,.5)}.mole{width:80%;height:80%;background:#d7ccc8;border-radius:40% 40% 10% 10%;position:absolute;bottom:-100%;left:10%;transition:bottom .1s;display:flex;justify-content:center;align-items:center;z-index:2}.mole::after{content:'..';color:#3e2723;font-size:40px;font-weight:700;margin-top:-20px;letter-spacing:5px}.mole::before{content:'';position:absolute;width:40%;height:30%;background:#ffccbc;border-radius:50%;top:50%}.hole.up .mole{bottom:0}.hole.whacked .mole{background:#ff5252;transform:scale(.9)}.mole.golden{background:gold;box-shadow:0 0 15px gold}.mole.golden::after{content:'$';color:#b8860b;font-size:35px}.mole.golden::before{background:#fff176}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);z-index:100;display:flex;justify-content:center;align-items:center;backdrop-filter:blur(5px)}.modal{background:#fff;padding:3rem;border-radius:30px;text-align:center;color:#2c3e50;animation:popIn .3s;max-width:90%;width:400px;border:5px solid var(--grass-color)}@keyframes popIn{from{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}button{padding:1rem 2.5rem;border-radius:50px;border:none;font-family:Fredoka,sans-serif;font-size:1.2rem;cursor:pointer;background:var(--grass-color);color:#fff;font-weight:700;margin-top:20px;box-shadow:0 4px 0 #2e7d32;transition:all .1s}button:focus,button:hover{transform:translateY(-2px);box-shadow:0 6px 0 #2e7d32;outline:3px solid #3E2723}button:active{transform:translateY(2px);box-shadow:0 2px 0 #2e7d32}.difficulty-btn{padding:.8rem 1.5rem;font-size:1rem;margin:0 5px;background:#795548;box-shadow:0 4px 0 #4e342e}.difficulty-btn:hover{box-shadow:0 6px 0 #4e342e}.difficulty-btn:active{box-shadow:0 2px 0 #4e342e}.difficulty-btn.selected{background:#ffd54f;color:#3e2723;box-shadow:0 4px 0 #ff6f00}.back-btn{position:absolute;top:20px;left:20px;color:#fff;text-decoration:none;font-weight:700;font-size:1.1rem;background:rgba(0,0,0,.3);padding:10px 20px;border-radius:30px;transition:background .2s}.back-btn:focus,.back-btn:hover{background:rgba(0,0,0,.5);outline:2px solid var(--accent)}.controls-hint{margin-top:20px;color:rgba(255,255,255,.7);text-align:center}.key-badge{display:inline-block;background:#3e2723;color:#ffd54f;padding:2px 8px;border-radius:5px;margin:0 3px;font-weight:700;font-family:monospace}.float-score{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2rem;font-weight:700;color:#fff;pointer-events:none;animation:floatUp .5s ease-out forwards;z-index:10;text-shadow:2px 2px 0 #000}@keyframes floatUp{0%{opacity:1;transform:translate(-50%,-50%)}100%{opacity:0;transform:translate(-50%,-150%)}}body.mode-tv{cursor:none}</style></head><body><a href="#" class="back-btn" onclick="goHome(event)">🏠 Back to Home</a><h1>Whack-a-Mole</h1><div class="stats-bar"><div>Score: <span id="score">0</span></div><div>Time: <span id="time">30</span></div></div><div class="game-board" id="board" tabindex="0"></div><div class="controls-hint"><p>Press keys <span class="key-badge">1</span>-<span class="key-badge">9</span> to whack!</p><p>Hit Mole: +2s | Miss: -1s</p></div><div class="modal-overlay" id="startModal"><div class="modal"><h2>Ready to Whack?</h2><p>Select Difficulty:</p><div style="margin-bottom:20px"><button class="difficulty-btn" onclick='selectDifficulty("easy")'>Easy</button> <button class="difficulty-btn selected" onclick='selectDifficulty("medium")'>Medium</button> <button class="difficulty-btn" onclick='selectDifficulty("hard")'>Hard</button></div><p>Press the number keys to hit the moles!</p><button id="startBtn" onclick="startGame()">Start Game</button></div></div><div class="modal-overlay" id="gameOverModal" style="display:none"><div class="modal"><h2>Time's Up!</h2><p>Your Score: <span id="finalScore">0</span></p><button onclick="startGame()">Play Again</button> <button onclick="goHome(event)" style="margin-top:10px;background-color:#8d6e63;display:block;width:100%">Back to Home</button></div></div><script>const board=document.getElementById("board"),scoreDisplay=document.getElementById("score"),timeDisplay=document.getElementById("time"),startModal=document.getElementById("startModal"),gameOverModal=document.getElementById("gameOverModal"),finalScoreDisplay=document.getElementById("finalScore");let lastHole,timerInterval,holes=[],timeUp=!1,score=0,timeLeft=30,currentDifficulty="medium";function selectDifficulty(e){currentDifficulty=e,document.querySelectorAll(".difficulty-btn").forEach(t=>{t.classList.remove("selected"),t.textContent.toLowerCase()===e&&(t.classList.add("selected"),t.scrollIntoView({behavior:"smooth",block:"center"}))})}const difficulties=["easy","medium","hard"];function cycleDifficulty(e){let t=difficulties.indexOf(currentDifficulty);t+=e,t<0&&(t=difficulties.length-1),t>=difficulties.length&&(t=0),selectDifficulty(difficulties[t])}function createBoard(){for(let e=0;e<9;e++){const t=document.createElement("div");t.classList.add("hole"),t.dataset.index=e;const n=document.createElement("div");n.classList.add("hole-number"),n.textContent=e+1,t.appendChild(n);const o=document.createElement("div");o.classList.add("mole"),t.appendChild(o),board.appendChild(t),holes.push(t),t.addEventListener("mousedown",()=>whack(t)),t.addEventListener("touchstart",e=>{e.preventDefault(),whack(t)})}}function randomTime(e,t){return Math.round(Math.random()*(t-e)+e)}function randomHole(e){const t=e[Math.floor(Math.random()*e.length)];return t===lastHole?randomHole(e):(lastHole=t,t)}const SoundManager={ctx:null,init:function(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))},playTone:function(e,t,n,o=.1){this.ctx||this.init();const a=this.ctx.createOscillator(),i=this.ctx.createGain();a.type=t,a.frequency.setValueAtTime(e,this.ctx.currentTime),i.gain.setValueAtTime(o,this.ctx.currentTime),i.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+n),a.connect(i),i.connect(this.ctx.destination),a.start(),a.stop(this.ctx.currentTime+n)},hit:function(){this.playTone(600,"square",.1)},miss:function(){this.playTone(150,"sawtooth",.2)},coin:function(){this.playTone(1200,"sine",.1,.1)}};function peep(){let e,t,n=1;"easy"===currentDifficulty?(e=800,t=1500):"medium"===currentDifficulty?(e=500,t=1e3):(e=400,t=800,Math.random()>.5&&(n=2));const o=randomTime(e,t);for(let e=0;e<n;e++){const t=randomHole(holes),n=t.querySelector(".mole");Math.random()<.005?(n.classList.add("golden"),t.dataset.isGolden="true"):(n.classList.remove("golden"),t.dataset.isGolden="false"),t.classList.add("up"),setTimeout(()=>{t.classList.remove("up"),timeUp||0!==e||peep()},o)}}function startGame(){startModal.style.display="none",gameOverModal.style.display="none",scoreDisplay.textContent=0,timeDisplay.textContent=30,score=0,timeLeft=30,timeLeft=30,timeUp=!1,board.focus(),peep(),timerInterval=setInterval(()=>{timeLeft--,timeDisplay.textContent=timeLeft,timeLeft<=0&&endGame()},1e3)}function endGame(){timeUp=!0,clearInterval(timerInterval),finalScoreDisplay.textContent=score,gameOverModal.style.display="flex","undefined"!=typeof TimeManager&&TimeManager.syncTimeRemote(!0),setTimeout(()=>gameOverModal.querySelector("button").focus(),100)}function showFloatText(e,t,n){const o=document.createElement("div");o.classList.add("float-score"),o.textContent=t,o.style.color=n,e.appendChild(o),setTimeout(()=>o.remove(),500)}function whack(e){timeUp||(e.classList.contains("up")?(score++,timeLeft+=2,timeDisplay.textContent=timeLeft,e.classList.remove("up"),e.classList.add("whacked"),setTimeout(()=>e.classList.remove("whacked"),200),scoreDisplay.textContent=score,"true"===e.dataset.isGolden?("undefined"!=typeof GoldManager&&GoldManager.addCoins(1),showFloatText(e,"+1 Coin!","#FFD700"),SoundManager.coin(),e.dataset.isGolden="false"):(showFloatText(e,"+2s","#4CAF50"),SoundManager.hit()),e.classList.remove("up"),e.classList.add("whacked"),setTimeout(()=>e.classList.remove("whacked"),200),scoreDisplay.textContent=score):(timeLeft-=1,timeLeft<0&&(timeLeft=0),timeDisplay.textContent=timeLeft,e.classList.add("whacked-wrong"),setTimeout(()=>e.classList.remove("whacked-wrong"),200),showFloatText(e,"-1s","#FF5252"),SoundManager.miss()))}function playTone(e,t,n){}function toggleFullscreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{console.log(`Error attempting to enable full-screen mode: ${e.message} (${e.name})`)})}async function goHome(e){e&&e.preventDefault();try{if("undefined"!=typeof TimeManager){const e=TimeManager.syncTimeRemote(!0),t=new Promise(e=>setTimeout(e,500));await Promise.race([e,t])}}catch(e){console.warn("Sync failed or timed out:",e)}window.location.href="index.html"}document.addEventListener("keydown",e=>{const t=e.key,n=e.keyCode;let o=!1;if("Backspace"!==t&&"Escape"!==t&&8!==n&&27!==n&&461!==n&&10009!==n&&4!==n||(window.location.href="index.html",o=!0),"none"!==startModal.style.display){if(["4","ArrowLeft"].includes(t)||37===n||21===n)cycleDifficulty(-1),o=!0;else if(["6","ArrowRight"].includes(t)||39===n||22===n)cycleDifficulty(1),o=!0;else if(["Enter"," ","5"].includes(t)||13===n||23===n){const e=document.activeElement;e&&"BUTTON"===e.tagName?e.click():startGame(),o=!0}}else if("none"!==gameOverModal.style.display){if(["Enter"," ","5"].includes(t)||13===n||23===n){const e=document.activeElement;e&&"BUTTON"===e.tagName?e.click():startGame(),o=!0}}else{const e=parseInt(t)-1;!isNaN(e)&&e>=0&&e<9?(whack(holes[e]),o=!0):"0"!==t&&"f"!==t.toLowerCase()||(toggleFullscreen(),o=!0)}o&&(e.preventDefault(),e.stopPropagation())}),window.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search).get("mode");e?document.body.classList.add(`mode-${e}`):("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&document.body.classList.add("mode-mobile")}),createBoard(),window.onload=()=>{if("none"!==startModal.style.display){const e=document.getElementById("startBtn");e&&e.focus()}else board.focus()},board.addEventListener("blur",()=>{timeUp||"none"!==startModal.style.display||"none"!==gameOverModal.style.display||setTimeout(()=>{document.activeElement&&document.activeElement!==document.body||board.focus()},200)})</script><script src="global.js"></script></body></html>